---
layout: post
title:  "DataBase :: Join (2)"
date:   2017-10-08
excerpt: "Join 개념 (2)"
cate : "post"
tag:
- DB
---


## Concept

> Join은 2개의 테이블에 대해 연관된 튜플들을 결합하여 새로운 릴레이션을 반환

* JOIN은 크게 INNER & OUTER JOIN 으로 구분됨 

--- 

**OUTER JOIN**
* Join 조건에 만족하지 않는 튜플도 결과로 출력하기 위한 방법
* `LEFT OUTER JOIN`, `RIGHT OUTER JOIN`, `FULL OUTER JOIN`이 있다.

---

**LEFT OUTER JOIN**
* INNER JOIN의 결과를 구한 후, `우측` 릴레이션의 어떤 튜플과도 맞지 않는 `좌측` 릴레이션에 있는 튜플들에 `NULL 값`을 붙여 INNER JOIN의 결과에 추가

 ```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1 LEFT OUTER JOIN 테이블명2
ON 테이블명1.속성명 = 테이블명2.속성명;
```    

```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1, 테이블명2
ON 테이블명1.속성명 = 테이블명2.속성명(+);
```    


---

**RIGHT OUTER JOIN**
* INNER JOIN의 결과를 구한 후, `좌측` 릴레이션의 어떤 튜플과도 맞지 않는 `우측` 릴레이션에 있는 튜플들에 `NULL 값`을 붙여 INNER JOIN의 결과에 추가

 ```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1 RIGHT OUTER JOIN 테이블명2
ON 테이블명1.속성명 = 테이블명2.속성명;
```    

```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1, 테이블명2
ON 테이블명1.속성명(+) = 테이블명2.속성명;
```    

---

* Inner Join은 두 릴레이션에서 `관련 있는 튜플만` 표시
* Left Outer Join은 `좌측 릴레이션`이 `기준`이 되어 좌측 릴레이션에 있는 튜플은 `모두 표시` `우측 릴레이션`에서는 `관련 있는 튜플`만 표시
* Right Outer Join은 `우측 릴레이션`이 `기준`이 되어 우측 릴레이션에 있는 튜플은 `모두 표시` `좌측 릴레이션`에서는 `관련 있는 튜플`만 표시

* Outer Join에서 `'+'`를 사용하면 Inner Join과 동일한 형식으로 사용 가능. `Left일 때`는 `조건문의 우측`에, `Right일 때`는 `조건문의 좌측`에 '+'를 붙힘

---

**FULL OUTER JOIN**
* `LEFT OUTER JOIN`과 `RIGHT OUTER JOIN`을 합쳐 놓은 것

 ```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1 FULL OUTER JOIN 테이블명2
ON 테이블명1.속성명 = 테이블명2.속성명;
```    

---


## Example

{% capture images %}
    /assets/img/posts/join_1.png
    /assets/img/posts/join_2.png
    /assets/img/posts/join_3.png 
{% endcapture %}
{% include gallery images=images caption=" " cols=3 %}

 Q. <학생> 테이블과 <학과> 테이블에서 학과코드값이 같은 튜플을 Join하여 학번, 이름, 학과코드, 학과명을 출력하는 SQL문을 작성하시오.
{: .notice}


```    
Select 학번, 이름, 학생.학과코드, 학과명
From 학생, 학과
Where 학생.학과코드 = 학과.학과코드;
```    

```    
Select 학번, 이름, 학생.학과코드, 학과명
From 학생 Natural Join 학과;
```    

```    
Select 학번, 이름, 학생.학과코드, 학과명
From 학생 Join 학과 Using(학과코드);
```    

{% capture images %}
    /assets/img/posts/join_4.png
{% endcapture %}
{% include gallery images=images caption=" " cols=1 %}

* 테이블을 조인하여 사용할 때 `한 테이블에만` 있는 속성은 테이블명을 `생략`할 수 있지만 `두 테이블`에 모두 속해 있는 속성은 `반드시` 속성명을 테이블명과 함께 표시해야 한다.

* `Natural Join`은 `조인할 속성`을 `지정하지 않기` 때문에 조인하려는 두 테이블에는 `같은 이름`, `같은 속성의 도메인`이 반드시 `존재`해야 한다. <학생> 테이블과 <학과>테이블에는 같은 이름의 속성과 범위가 같은 도메인을 갖는 학과코드가 있기 때문에 Natural Join이 가능


---

 **NON-EQUI 조인**

* NON-EQUI은 JOIN 조건에 '=' 조건이 아닌 나머지 비교 연산자를 사용하는 JOIN 방법이다.

```
SELECT [테이블명1.]속성명, [테이블명2.]속성명
FROM 테이블명1, 테이블명2
WHERE (NON-EQUI JOIN 조건);
```    

Q.<학생> 테이블과 <성적등급> 테이블을 Join하여 각 학생의 학번, 이름, 성적, 등급을 출력하는 SQL문을 작성하시오.
{: .notice}

```
SELECT 학번, 이름, 성적, 등급
FROM 학생, 성적등급
WHERE 학생.성적 BETWEEN 성적등급.최저 AND 성적등급.최고;
```    

{% capture images %}
    /assets/img/posts/join_5.png
{% endcapture %}
{% include gallery images=images caption=" " cols=1 %}
